<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.oracle.projectGo.learningGroupMapper">
    <select id="NoTotalLearningContentCnt" resultType="int">
        SELECT COUNT(*) FROM gameContents
    </select>

    <select id="NoLearningContentList" resultType="GameContents">
        SELECT *
        FROM gamecontents

--         SELECT  a.id, a.contentid, a.userid, a.name, a.startdate, a.enddate, a.availableslots,
--                 b.id, b.title, b.subscribedate, b.gamelevel, b.maxsubscribers, b.content,
--                 b.subscribleStart, b.subscribleEnd
--         FROM    learningGroup a, gameContents b
--         WHERE   a.contentid = b.id
    </select>

    <select id="NoInsertFormLearningContent" parameterType="int" resultType="GameContents">
        SELECT *
        FROM gamecontents
        WHERE id = #{id}
    </select>

    <insert id="NoInsertLearningGroup" parameterType="Map">
        INSERT INTO learningGroup(id, contentId, userId, name, startDate, endDate, groupSize, etc1, etc2)
        VALUES(LEARNINGGROUP_ID_SEQ.NEXTVAL, #{id}, #{userId}, #{GroupName}, #{startDate}, #{endDate}, #{GroupSize}, #{GroupEtc1}, #{GroupEtc2})
    </insert>

    <select id="NoTotalLearningGroupCnt" resultType="int">
        SELECT COUNT(*) FROM learningGroup
    </select>

    <select id="NoLearningGroupList" resultType="LearningGroup">
        SELECT *
        FROM learninggroup
    </select>

    <select id="NoDetailLearningGroup" parameterType="int" resultType="LearningGroup">
        SELECT *
        FROM   learninggroup a
        Join   learninggroupmember b
        ON     a.id = b.groupId
        WHERE  a.id = #{id}
    </select>


    <select id="getGroupMemberByGroupId" resultType="Users">
        SELECT users.*
        FROM learningGroupMember lgm
        JOIN users ON lgm.userid = users.id
        WHERE lgm.groupId = #{groupId}
    </select>
    <select id="getGroupMembersByEducatorId" resultType="Users">
        SELECT u.id, u.nickname, u.userType, u.name, lg.name as groupName
        FROM learningGroup lg
        JOIN learningGroupMember lgm ON lg.id = lgm.groupId
        JOIN users u ON lgm.userId = u.id
        WHERE lg.userId = #{educatorId}
    </select>

</mapper>