<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.oracle.projectGo.HomeworksMapper">
    <insert id="insertHomework" parameterType="Homeworks">
        INSERT INTO homeworks(id, userId, title, content, progress, deadline, createdAt)
        VALUES (homeworks_id_seq.NEXTVAL, #{userId}, #{title}, #{content}, #{progress}, #{deadline}, sysdate)
    </insert>
    <select id="getHomeworksList" resultType="Homeworks">
        <![CDATA[
            SELECT *
            FROM (
                SELECT a.*, ROWNUM rn
                FROM (
                    SELECT *
                    FROM homeworks
                    ORDER BY createdAt DESC
                    ) a
                WHERE ROWNUM <= #{end}
                )
            WHERE rn >= #{start}
        ]]>
    </select>
    <select id="getTotalHomeworksCnt" resultType="int" parameterType="Homeworks">
        SELECT count(*)
        FROM homeworks
        WHERE 1=1

    </select>
</mapper>